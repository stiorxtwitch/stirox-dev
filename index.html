<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>STIROX | Développeur</title>

<link rel="icon" href="https://i.imgur.com/DguYFX1.png"/>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>

<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Inter:wght@300;400;500;600;700&display=swap');

:root{
--neon:#00ff9d;
--neon-dark:#00cc7a;
}

body{
font-family:'Inter',sans-serif;
background:#0a0e14;
color:#e0f7fa;
overflow-x:hidden;
}

.title-font{
font-family:'Orbitron',sans-serif;
letter-spacing:2px;
}
</style>
</head>

<body>

<!-- =========================
NAVBAR
========================= -->
<nav id="navbar" class="p-6 flex justify-between">

<div class="flex gap-3 items-center">
<img src="https://i.imgur.com/DguYFX1.png" class="w-10 rounded"/>
<div class="text-2xl font-bold title-font">STIROX</div>
</div>

<div id="discord-status" class="hidden flex items-center gap-3">
<div id="status-dot" class="w-3 h-3 rounded-full bg-gray-400"></div>
<div id="status-text">...</div>
</div>

</nav>


<!-- =========================
SECTIONS
========================= -->

<section id="accueil" class="p-20">
<h1 class="text-6xl title-font">STIROX</h1>
<p>Développeur interfaces RP médical et militaire.</p>
</section>

<section id="apropos" class="p-20">
<h2 class="text-4xl title-font">À propos</h2>
<p>Étudiant infirmier et développeur web RP.</p>
</section>

<section id="competences" class="p-20">
<h2 class="text-4xl title-font">Compétences</h2>
<p>HTML CSS JS Python Lua Tailwind</p>
</section>

<section id="projets" class="p-20">
<h2 class="text-4xl title-font">Projets</h2>
<p>Robot pharma, dispatch médical, dossiers patients, formation RP.</p>
</section>

<section id="contact" class="p-20">
<h2 class="text-4xl title-font">Contact</h2>
<p>Formulaire disponible.</p>
</section>


<!-- =========================
CHATBOT UI
========================= -->

<div id="chat-modal" class="fixed bottom-8 right-8 w-96 bg-black border border-emerald-500 rounded-2xl">

<div id="chat-messages" class="h-80 overflow-y-auto p-4"></div>

<div class="flex p-3 gap-2">
<input id="chat-input" class="flex-1 bg-zinc-900 rounded-xl px-4 py-3"
placeholder="Message..."
onkeypress="if(event.key==='Enter') sendMessage()">

<button onclick="sendMessage()" class="bg-emerald-400 text-black px-4 rounded-xl">
Envoyer
</button>
</div>

</div>



<script>

/* =====================================================
MATRIX (inchangé simplifié)
===================================================== */
function initMatrix(){}



/* =====================================================
DISCORD STATUS FIX SAFE
===================================================== */
async function updateDiscordStatus(){

try{

const res=await fetch("https://api.lanyard.rest/v1/users/771440807919878164");
const json=await res.json();

if(!json.success) return;

const container=document.getElementById("discord-status");
const dot=document.getElementById("status-dot");
const text=document.getElementById("status-text");

if(!container || !dot || !text) return;

container.classList.remove("hidden");

const status=json.data.discord_status;

if(status==="online"){
dot.className="w-3 h-3 rounded-full bg-green-400";
text.textContent="En ligne";
}
else if(status==="idle"){
dot.className="w-3 h-3 rounded-full bg-yellow-400";
text.textContent="Inactif";
}
else if(status==="dnd"){
dot.className="w-3 h-3 rounded-full bg-red-500";
text.textContent="DND";
}
else{
dot.className="w-3 h-3 rounded-full bg-gray-400";
text.textContent="Hors ligne";
}

}catch(e){
console.log("Lanyard offline");
}

}



/* =====================================================
IA SEMANTIQUE RÉELLE (fixée)
===================================================== */

let siteKnowledge=[];

function buildKnowledgeBase(){

siteKnowledge=[];

const sections=document.querySelectorAll("section");

/* fallback si rien trouvé */
if(sections.length===0){

siteKnowledge.push(document.body.innerText);
return;

}

sections.forEach(sec=>{

let text=sec.innerText;

if(text && text.length>20){

text=text.replace(/\s+/g," ");
siteKnowledge.push(text);

}

});

console.log("IA chargée :",siteKnowledge.length,"blocs");

}


/* normalisation */
function normalize(t){
return t.toLowerCase()
.replace(/[^\w\sàâçéèêëîïôûùüÿñæœ]/g,"")
.split(/\s+/)
.filter(w=>w.length>2);
}


/* score */
function similarity(a,b){

const wa=normalize(a);
const wb=normalize(b);

let score=0;

wa.forEach(w=>{
if(wb.includes(w)) score++;
});

return score/Math.max(wa.length,1);
}


/* résumé */
function summarize(text){

const s=text.split(/[.!?]/);

if(s.length<=2) return text;

return s.slice(0,2).join(". ")+".";

}


/* moteur */
function getSmartReply(msg){

if(siteKnowledge.length===0){
return "Chargement...";
}

let bestScore=0;
let bestText="";

siteKnowledge.forEach(block=>{

const score=similarity(msg,block);

if(score>bestScore){
bestScore=score;
bestText=block;
}

});

if(bestScore<0.12){
return "Je n’ai pas trouvé cette info sur le site.";
}

return summarize(bestText);

}



/* =====================================================
CHAT UI
===================================================== */
function sendMessage(){

const input=document.getElementById("chat-input");
const text=input.value.trim();
if(!text) return;

const box=document.getElementById("chat-messages");

box.innerHTML+=`
<div class="text-right mb-3">
<div class="inline-block bg-emerald-400 text-black px-4 py-2 rounded-xl">
${text}
</div>
</div>
`;

setTimeout(()=>{

const reply=getSmartReply(text);

box.innerHTML+=`
<div class="mb-3">
<div class="inline-block bg-zinc-800 px-4 py-2 rounded-xl">
${reply}
</div>
</div>
`;

box.scrollTop=box.scrollHeight;

},400);

input.value="";
}



/* =====================================================
INIT FIX
===================================================== */
window.addEventListener("load",()=>{

initMatrix();

setTimeout(()=>{
buildKnowledgeBase();
},200);

updateDiscordStatus();
setInterval(updateDiscordStatus,60000);

});

</script>

</body>
</html>
